.segment "CHR0"

.macro hexChar val
	.local @d0, @d1, @d2, @d3, @d4
	@d0 = %00_111_111_111_111_111_101_111_111_001_111
	@d1 = %00_101_101_001_100_100_101_001_001_001_101
	@d2 = %00_111_111_001_111_111_111_111_111_001_101
	@d3 = %00_001_101_001_101_001_001_001_100_001_101
	@d4 = %00_111_111_001_111_111_001_111_111_001_111
	.local @a0, @a1, @a2, @a3, @a4
	@a0 = %00_001_111_101_011_111_111_110_111_110_111
	@a1 = %00_001_010_101_100_100_100_101_100_101_101
	@a2 = %00_001_010_111_101_111_111_101_100_110_111
	@a3 = %00_101_010_101_101_100_100_101_100_101_101
	@a4 = %00_010_111_101_011_100_111_110_111_110_101
	.local @v0, @v1, @v2, @v3, @v4, @v5
	@v0 .set 0
	@v1 .set 0
	@v2 .set 0
	@v3 .set 0
	@v4 .set 0
	@v5 .set 0
	.local @v, @i
	@v .set val
	.repeat 2
		@i .set (@v >> 4) & $0F
		@v .set @v << 4
		.if @i < 10
			@i .set @i * 3
			@v0 .set  @v1 << 4
			@v1 .set (@v2 << 4) | ((@d0 >> @i) & %111)
			@v2 .set (@v3 << 4) | ((@d1 >> @i) & %111)
			@v3 .set (@v4 << 4) | ((@d2 >> @i) & %111)
			@v4 .set (@v5 << 4) | ((@d3 >> @i) & %111)
			@v5 .set               (@d4 >> @i) & %111
		.else
			@i .set (@i - 10) * 3
			@v0 .set  @v1 << 4
			@v1 .set (@v2 << 4) | ((@a0 >> @i) & %111)
			@v2 .set (@v3 << 4) | ((@a1 >> @i) & %111)
			@v3 .set (@v4 << 4) | ((@a2 >> @i) & %111)
			@v4 .set (@v5 << 4) | ((@a3 >> @i) & %111)
			@v5 .set               (@a4 >> @i) & %111
		.endif
	.endrepeat
	.byte 0, @v0, @v1, @v2, @v3, @v4, @v5, 0
	.byte 0, @v0, @v1, @v2, @v3, @v4, @v5, 0
.endmacro

.repeat $100, v
	hexChar v
.endrepeat
